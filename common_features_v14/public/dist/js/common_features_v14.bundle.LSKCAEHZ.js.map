{
  "version": 3,
  "sources": ["../../../../../apps/common_features_v14/common_features_v14/public/js/update.js", "../../../../../apps/common_features_v14/common_features_v14/public/js/website.js"],
  "sourcesContent": ["// frappe.provide('common_features_v14');\nfrappe.provide('common_features_pre');\nfrappe.provide('common_features_success');\nfrappe.provide('common_features_maintenance');\n\n// common_features_v14.update_indicator = function (link) {\n//     if (document.querySelector(\"[role='thirvu-update-indicator']\")) {\n//         return\n//     }\n//     let header = document.querySelector(\".main-section header[role='navigation']\").parentElement\n//     var r = document.querySelector(':root');\n//     r.style.setProperty('--navbar-height', '95px');\n//     r.style.setProperty('--top-navhi', '40px');\n//     let update_version_txt = `<a class='version-update-link' href='${link}'>updated version</a>`\n//     header.prepend($(`\n//             <div class=\"app-update\" role=\"thirvu-update-indicator\">\n//                 <div class=\"app-update-refresh\">\n//                     <div>\n//                         The application has been updated, please refresh this page to get a ${link?update_version_txt:'updated version'}\n//                     </div>\n//                     <button class=\"btn btn-primary\" onclick=frappe.ui.toolbar.clear_cache()>Refresh</button>\n//                 </div>\n//             </div>`)[0]\n//     );\n// }\n\ncommon_features_pre.update_indicator_pre = function (link1,time) {\n    if (document.querySelector(\"[role='thirvu-update-indicator']\")) {\n        return\n    }\n    let header = document.querySelector(\".main-section header[role='navigation']\").parentElement\n    var r = document.querySelector(':root');\n    r.style.setProperty('--navbar-height', '140px');\n    r.style.setProperty('--top-navhi', '40px');\n    header.prepend($(`\n            <div class=\"app-update\" role=\"thirvu-update-indicator\">\n                <div class=\"app-update-refresh\">\n                    <div>\n                        ${link1} ${time}\n                    </div>\n                </div>\n            </div>`)[0]\n    );\n}\n\ncommon_features_maintenance.update_indicator_maintenance = function (link2) {\n    if (document.querySelector(\"[role='thirvu-update-indicator']\")) {\n        return\n    }\n    let header = document.querySelector(\".main-section header[role='navigation']\").parentElement\n    var r = document.querySelector(':root');\n    r.style.setProperty('--navbar-height', '140px');\n    r.style.setProperty('--top-navhi', '40px');\n    header.prepend($(`\n            <div class=\"app-update\" role=\"thirvu-update-indicator\">\n                <div class=\"app-update-refresh\">\n                    <div>\n                        ${link2}\n                    </div>\n                </div>\n            </div>`)[0]\n    );\n}\n\ncommon_features_success.update_indicator_success = function (link3) {\n    if (document.querySelector(\"[role='thirvu-update-indicator']\")) {\n        return\n    }\n    let header = document.querySelector(\".main-section header[role='navigation']\").parentElement\n    var r = document.querySelector(':root');\n    r.style.setProperty('--navbar-height', '140px');\n    r.style.setProperty('--top-navhi', '40px');\n    header.prepend($(`\n            <div class=\"app-update\" role=\"thirvu-update-indicator\">\n                <div class=\"app-update-refresh\">\n                    <div>\n                        ${link3}\n                    </div>\n                    <button class=\"btn btn-primary\" onclick=frappe.ui.toolbar.clear_cache()>Refresh</button>\n                </div>\n            </div>`)[0]\n    );\n}\n$(document).ready(function (frm) {\n    // frappe.realtime.on(\"custom-version-update\", function ({ link }) {\n    //     common_features_v14.update_indicator(link)\n    // });\n    frappe.realtime.on(\"custom-version_pre\", function ({ link1,time }) { \n        common_features_pre.update_indicator_pre(link1,time)\n    });\n    frappe.realtime.on(\"custom-version_maintenance\", function ({ link2 }) { \n        common_features_maintenance.update_indicator_maintenance(link2)\n    });\n    frappe.realtime.on(\"custom-version_success\", function ({ link3 }) { \n        common_features_success.update_indicator_success(link3)\n        (`\n            <div class=\"app-update\" role=\"thirvu-update-indicator\">\n                <div class=\"app-update-refresh\">\n                    <div>\n                        ${link3}\n                    </div>\n                    <button class=\"btn btn-primary\" onclick=frappe.ui.toolbar.clear_cache()>Refresh</button>\n                </div>\n            </div>`)[0]\n    });\n    frappe.call({\n        method: \"common_features_v14.common_features_v14.doctype.version_update.version_update.refresh_warning\",\n        callback: function (r) { \n            if (r.message[0]) {\n                common_features_pre.update_indicator_pre(r.message[0],r.message[1])\n            }\n        }\n    })\n    // frappe.call({\n    //     method: \"common_features_v14.common_features_v14.doctype.version_update.version_update.refresh_success\",\n    //     callback: function (r) { \n    //         if (r.message) {\n    //             common_features_success.update_indicator_success(r.message)   \n    //         }\n    //     }\n    // })\n    frappe.call({\n        method: \"common_features_v14.common_features_v14.doctype.version_update.version_update.refresh_mainteance\",\n        callback: function (r) { \n            if (r.message) {\n                common_features_maintenance.update_indicator_maintenance(r.message)   \n            }\n        }\n    })\n});\n\n\nfrappe.db.get_single_value(\"Thirvu System Settings\", \"toggle_full_width\").then((enabled) => {\n    if(enabled){\n        if(localStorage.container_fullwidth != \"true\"){\n            frappe.ui.toolbar.toggle_full_width()\n        }\n    }\n})\nfrappe.db.get_single_value(\"Thirvu System Settings\", \"hide_toggle_sidebar_in_list\").then((enabled) => {\n    if(enabled){\n        localStorage.show_sidebar = false\n    } else{\n        localStorage.show_sidebar = true\n    }\n})\n\n\n\n", "frappe.provide('common_features_v14');\n\n$(document).ready(function () {\n    common_features_v14.setFullWidth();\n    frappe.realtime.on(\"thirvu-set-full-width\", common_features_v14.setFullWidth);\n});\n\ncommon_features_v14.setFullWidth = function (data) {\n    let root = document.querySelector(':root');\n    if (data !== undefined) {\n        if (data) {\n            root.style.setProperty('--thirvu-full-width', '100%');\n        } else {\n            root.style.setProperty('--thirvu-full-width', '90%');\n        }\n    } else {\n        frappe.db.get_single_value(\"Thirvu System Settings\", \"force_full_width\").then(r => {\n            if (r) {\n                root.style.setProperty('--thirvu-full-width', '100%');\n            } else {\n                root.style.setProperty('--thirvu-full-width', '90%');\n            }\n        });\n    }\n}"],
  "mappings": "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",
  "names": []
}
